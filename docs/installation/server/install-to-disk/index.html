<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Installing to Disk #  BurmillaOS comes with a simple installer that will install BurmillaOS on a given target disk. To install BurmillaOS on a new disk, you can use the ros install command. Before installing, you&rsquo;ll need to have already booted BurmillaOS from ISO. Please be sure to pick the burmillaos.iso from our release page.
Installing BurmillaOS #  The ros install command orchestrates the installation from the burmilla/os container."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content><meta property="og:description" content="Installing to Disk #  BurmillaOS comes with a simple installer that will install BurmillaOS on a given target disk. To install BurmillaOS on a new disk, you can use the ros install command. Before installing, you&rsquo;ll need to have already booted BurmillaOS from ISO. Please be sure to pick the burmillaos.iso from our release page.
Installing BurmillaOS #  The ros install command orchestrates the installation from the burmilla/os container."><meta property="og:type" content="article"><meta property="og:url" content="https://burmillaos.org/docs/installation/server/install-to-disk/"><meta property="article:modified_time" content="2024-11-03T00:21:50+03:00"><title>Install to Disk | BurmillaOS</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.6cd8553a6854f4812343f0f0c8baca31271e686434f381fbe3c7226f66639176.css integrity="sha256-bNhVOmhU9IEjQ/DwyLrKMSceaGQ084H748cib2ZjkXY="><script defer src=/en.search.min.5b67b5953e3b2a171b6b51a22a8ef1216b6eae9a8f77e6e93869f90463a51473.js integrity="sha256-W2e1lT47Khcba1GiKo7xIWturpqPd+bpOGn5BGOlFHM="></script><script defer src=/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js integrity="sha256-dKi7B/C+6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>BurmillaOS</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/quick-start-guide/>Quick Start Guide</a></li><li><a href=/docs/installation/ class=collapsed>Installation</a><ul><li><a href=/docs/installation/upgrading/>Upgrading</a></li><li><a href=/docs/installation/boot-process/ class=collapsed>Boot Process</a></li><li><a href=/docs/installation/cloud/ class=collapsed>Cloud</a></li><li><a href=/docs/installation/custom-builds/ class=collapsed>Custom Builds</a></li><li><a href=/docs/installation/server/ class=collapsed>Server</a><ul><li><a href=/docs/installation/server/install-to-disk/ class=active>Install to Disk</a></li><li><a href=/docs/installation/server/raspberry-pi/>Raspberry Pi</a></li><li><a href=/docs/installation/server/pxe/>iPXE</a></li></ul></li><li><a href=/docs/installation/workstation/ class=collapsed>Workstation</a></li></ul></li><li><a href=/docs/configuration/ class=collapsed>Configuration</a></li><li><a href=/docs/networking/ class=collapsed>Networking</a></li><li><a href=/docs/storage/ class=collapsed>Storage</a></li><li><a href=/docs/system-services/ class=collapsed>System Services</a></li><li><a href=/docs/additional-resources/ class=collapsed>Aditional Resources</a></li><li><a href=/docs/faqs/>FAQs</a></li><li><a href=/docs/releases/>Releases</a></li><li><a href=/docs/reference/>Reference</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Install to Disk</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#installing-burmillaos>Installing BurmillaOS</a><ul><li><a href=#cloud-config>Cloud-Config</a></li><li><a href=#installing-a-different-version>Installing a Different Version</a></li><li><a href=#caching-images>Caching Images</a></li></ul></li><li><a href=#ssh-into-burmillaos>SSH into BurmillaOS</a></li><li><a href=#installing-with-no-internet-access>Installing with no Internet Access</a></li></ul></nav></aside></header><article class=markdown><h1 id=installing-to-disk>Installing to Disk
<a class=anchor href=#installing-to-disk>#</a></h1><p>BurmillaOS comes with a simple installer that will install BurmillaOS on a given target disk. To install BurmillaOS on a new disk, you can use the <code>ros install</code> command. Before installing, you&rsquo;ll need to have already
<a href=/docs/installation/workstation/boot-from-iso/>booted BurmillaOS from ISO</a>. Please be sure to pick the <code>burmillaos.iso</code> from our release
<a href=https://github.com/burmilla/os/releases>page</a>.</p><h2 id=installing-burmillaos>Installing BurmillaOS
<a class=anchor href=#installing-burmillaos>#</a></h2><p>The <code>ros install</code> command orchestrates the installation from the <code>burmilla/os</code> container. You will need to have already created a cloud-config file and found the target disk.</p><h3 id=cloud-config>Cloud-Config
<a class=anchor href=#cloud-config>#</a></h3><p>The easiest way to log in is to pass a <code>cloud-config.yml</code> file containing your public SSH keys. To learn more about what&rsquo;s supported in our cloud-config, please read our
<a href=/docs/configuration/base/#cloud-config>documentation</a>.</p><p>The <code>ros install</code> command will process your <code>cloud-config.yml</code> file specified with the <code>-c</code> flag. This file will also be placed onto the disk and installed to <code>/var/lib/rancher/conf/</code>. It will be evaluated on every boot.</p><p>Create a cloud-config file with a SSH key, this allows you to SSH into the box as the <code>rancher</code> user. The yml file would look like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#75715e>#cloud-config</span>
<span style=color:#f92672>ssh_authorized_keys</span>:
  - <span style=color:#ae81ff>ssh-rsa AAA...</span>
</code></pre></div><p>You can generate a new SSH key for <code>cloud-config.yml</code> file by following this
<a href=https://help.github.com/articles/generating-ssh-keys/>article</a>.</p><p>Copy the public SSH key into BurmillaOS before installing to disk.</p><p>Now that our <code>cloud-config.yml</code> contains our public SSH key, we can move on to installing BurmillaOS to disk!</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo ros install -c cloud-config.yml -d /dev/sda
INFO<span style=color:#f92672>[</span>0000<span style=color:#f92672>]</span> No install type specified...defaulting to generic
Installing from burmilla/os:v2.0.0
Continue <span style=color:#f92672>[</span>y/N<span style=color:#f92672>]</span>:
</code></pre></div><p>For the <code>cloud-config.yml</code> file, you can also specify a remote URL, but you need to make sure you can get it:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo ros install -c https://link/to/cloud-config.yml
</code></pre></div><p>You will be prompted to see if you want to continue. Type <strong>y</strong>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Unable to find image <span style=color:#e6db74>&#39;burmilla/os:v2.0.0&#39;</span> locally
v2.0.0: Pulling from burmilla/os
...
...
...
Status: Downloaded newer image <span style=color:#66d9ef>for</span> burmilla/os:v2.0.0
+ DEVICE<span style=color:#f92672>=</span>/dev/sda
...
...
...
+ umount /mnt/new_img
Continue with reboot <span style=color:#f92672>[</span>y/N<span style=color:#f92672>]</span>:
</code></pre></div><p>After installing BurmillaOS to disk, you will no longer be automatically logged in as the <code>rancher</code> user. You&rsquo;ll need to have added in SSH keys within your
<a href=/docs/configuration/base/#cloud-config>cloud-config file</a>.</p><h3 id=installing-a-different-version>Installing a Different Version
<a class=anchor href=#installing-a-different-version>#</a></h3><p>By default, <code>ros install</code> uses the same installer image version as the ISO it is run from. The <code>-i</code> option specifies the particular image to install from. To keep the ISO as small as possible, the installer image is downloaded from DockerHub and used in System Docker. For example for BurmillaOS v2.0.0 the default installer image would be <code>burmilla/os:v2.0.0</code>.</p><p>You can use <code>ros os list</code> command to find the list of available BurmillaOS images/versions.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo ros os list
burmilla/os:v2.0.0 local
</code></pre></div><p>Alternatively, you can set the installer image to any image in System Docker to install BurmillaOS. This is particularly useful for machines that will not have direct access to the internet.</p><h3 id=caching-images>Caching Images
<a class=anchor href=#caching-images>#</a></h3><p><em>Available as of RancherOS v1.5.3</em></p><p>Some configurations included in <code>cloud-config</code> require images to be downloaded from Docker to start. After installation, these images are downloaded automatically by BurmillaOS when booting. An example of these configurations are:</p><ul><li>rancher.services_include</li><li>rancher.console</li><li>rancher.docker</li></ul><p>If you want to download and save these images to disk during installation, they will be cached and not need to be downloaded again upon each boot. You can cache these images by adding <code>-s</code> when using <code>ros install</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ ros install -d &lt;disk&gt; -c &lt;cloud-config.yaml&gt; -s
</code></pre></div><h2 id=ssh-into-burmillaos>SSH into BurmillaOS
<a class=anchor href=#ssh-into-burmillaos>#</a></h2><p>After installing BurmillaOS, you can ssh into BurmillaOS using your private key and the <strong>rancher</strong> user.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ ssh -i /path/to/private/key rancher@&lt;ip-address&gt;
</code></pre></div><h2 id=installing-with-no-internet-access>Installing with no Internet Access
<a class=anchor href=#installing-with-no-internet-access>#</a></h2><p>If you&rsquo;d like to install BurmillaOS onto a machine that has no internet access, it is assumed you either have your own private registry or other means of distributing docker images to System Docker of the machine. If you need help with creating a private registry, please refer to the
<a href=https://docs.docker.com/registry/>Docker documentation for private registries</a>.</p><p>In the installation command (i.e. <code>sudo ros install</code>), there is an option to pass in a specific image to install. As long as this image is available in System Docker, then BurmillaOS will use that image to install BurmillaOS.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo ros install -c cloud-config.yml -d /dev/sda -i &lt;Image_Name_in_System_Docker&gt;
INFO<span style=color:#f92672>[</span>0000<span style=color:#f92672>]</span> No install type specified...defaulting to generic
Installing from &lt;Image_Name_in_System_Docker&gt;
Continue <span style=color:#f92672>[</span>y/N<span style=color:#f92672>]</span>:
</code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/burmilla/burmilla.github.io/commit/d1f8103458f8d8797699dad433c52d714e54f731 title="Last modified by Basil Peace | November 2, 2024" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>November 2, 2024</span></a></div></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#installing-burmillaos>Installing BurmillaOS</a><ul><li><a href=#cloud-config>Cloud-Config</a></li><li><a href=#installing-a-different-version>Installing a Different Version</a></li><li><a href=#caching-images>Caching Images</a></li></ul></li><li><a href=#ssh-into-burmillaos>SSH into BurmillaOS</a></li><li><a href=#installing-with-no-internet-access>Installing with no Internet Access</a></li></ul></nav></aside></main></body></html>