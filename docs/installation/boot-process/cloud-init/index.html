<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Cloud Init #  Userdata and metadata can be fetched from a cloud provider, VM runtime, or management service during the BurmillaOS boot process. Since v0.8.0, this process occurs while BurmillaOS is still running from memory and before System Docker starts. It is configured by the rancher.cloud_init.datasources configuration parameter. For cloud-provider specific images, such as AWS and GCE, the datasource is pre-configured.
Userdata #  Userdata is a file given by users when launching BurmillaOS hosts."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content><meta property="og:description" content="Cloud Init #  Userdata and metadata can be fetched from a cloud provider, VM runtime, or management service during the BurmillaOS boot process. Since v0.8.0, this process occurs while BurmillaOS is still running from memory and before System Docker starts. It is configured by the rancher.cloud_init.datasources configuration parameter. For cloud-provider specific images, such as AWS and GCE, the datasource is pre-configured.
Userdata #  Userdata is a file given by users when launching BurmillaOS hosts."><meta property="og:type" content="article"><meta property="og:url" content="https://burmillaos.org/docs/installation/boot-process/cloud-init/"><meta property="article:modified_time" content="2024-11-03T00:21:50+03:00"><title>Cloud Init | BurmillaOS</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.6cd8553a6854f4812343f0f0c8baca31271e686434f381fbe3c7226f66639176.css integrity="sha256-bNhVOmhU9IEjQ/DwyLrKMSceaGQ084H748cib2ZjkXY="><script defer src=/en.search.min.5b67b5953e3b2a171b6b51a22a8ef1216b6eae9a8f77e6e93869f90463a51473.js integrity="sha256-W2e1lT47Khcba1GiKo7xIWturpqPd+bpOGn5BGOlFHM="></script><script defer src=/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js integrity="sha256-dKi7B/C+6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>BurmillaOS</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/quick-start-guide/>Quick Start Guide</a></li><li><a href=/docs/installation/ class=collapsed>Installation</a><ul><li><a href=/docs/installation/upgrading/>Upgrading</a></li><li><a href=/docs/installation/boot-process/ class=collapsed>Boot Process</a><ul><li><a href=/docs/installation/boot-process/cloud-init/ class=active>Cloud Init</a></li><li><a href=/docs/installation/boot-process/image-preloading/>Image Preloading</a></li><li><a href=/docs/installation/boot-process/logging/>Logging</a></li></ul></li><li><a href=/docs/installation/cloud/ class=collapsed>Cloud</a></li><li><a href=/docs/installation/custom-builds/ class=collapsed>Custom Builds</a></li><li><a href=/docs/installation/server/ class=collapsed>Server</a></li><li><a href=/docs/installation/workstation/ class=collapsed>Workstation</a></li></ul></li><li><a href=/docs/configuration/ class=collapsed>Configuration</a></li><li><a href=/docs/networking/ class=collapsed>Networking</a></li><li><a href=/docs/storage/ class=collapsed>Storage</a></li><li><a href=/docs/system-services/ class=collapsed>System Services</a></li><li><a href=/docs/additional-resources/ class=collapsed>Aditional Resources</a></li><li><a href=/docs/faqs/>FAQs</a></li><li><a href=/docs/releases/>Releases</a></li><li><a href=/docs/reference/>Reference</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Cloud Init</strong>
<label for=toc-control></label></div></header><article class=markdown><h1 id=cloud-init>Cloud Init
<a class=anchor href=#cloud-init>#</a></h1><p>Userdata and metadata can be fetched from a cloud provider, VM runtime, or management service during the BurmillaOS boot process. Since v0.8.0, this process occurs while BurmillaOS is still running from memory and before System Docker starts. It is configured by the <code>rancher.cloud_init.datasources</code> configuration parameter. For cloud-provider specific images, such as AWS and GCE, the datasource is pre-configured.</p><h2 id=userdata>Userdata
<a class=anchor href=#userdata>#</a></h2><p>Userdata is a file given by users when launching BurmillaOS hosts. It is stored in different locations depending on its format. If the userdata is a
<a href=/docs/configuration/base/#cloud-config>cloud-config</a> file, indicated by beginning with <code>#cloud-config</code> and being in YAML format, it is stored in <code>/var/lib/rancher/conf/cloud-config.d/boot.yml</code>. If the userdata is a script, indicated by beginning with <code>#!</code>, it is stored in <code>/var/lib/rancher/conf/cloud-config-script</code>.</p><h2 id=metadata>Metadata
<a class=anchor href=#metadata>#</a></h2><p>Although the specifics vary based on provider, a metadata file will typically contain information about the BurmillaOS host and contain additional configuration. Its primary purpose within BurmillaOS is to provide an alternate source for SSH keys and hostname configuration. For example, AWS launches hosts with a set of authorized keys and BurmillaOS obtains these via metadata. Metadata is stored in <code>/var/lib/rancher/conf/metadata</code>.</p><h2 id=configuration-load-order>Configuration Load Order
<a class=anchor href=#configuration-load-order>#</a></h2><p><a href=/docs/configuration/base/#cloud-config>Cloud-config</a> is read by system services when they need to get configuration. Each additional file overwrites and extends the previous configuration file.</p><ol><li><code>/usr/share/ros/os-config.yml</code> - This is the system default configuration, which should <strong>not</strong> be modified by users.</li><li><code>/usr/share/ros/oem/oem-config.yml</code> - This will typically exist by OEM, which should <strong>not</strong> be modified by users.</li><li>Files in <code>/var/lib/rancher/conf/cloud-config.d/</code> ordered by filename. If a file is passed in through user-data, it is written by cloud-init and saved as <code>/var/lib/rancher/conf/cloud-config.d/boot.yml</code>.</li><li><code>/var/lib/rancher/conf/cloud-config.yml</code> - If you set anything with <code>ros config set</code>, the changes are saved in this file.</li><li>Kernel parameters with names starting with <code>rancher</code>.</li><li><code>/var/lib/rancher/conf/metadata</code> - Metadata added by cloud-init.</li></ol></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/burmilla/burmilla.github.io/commit/d1f8103458f8d8797699dad433c52d714e54f731 title="Last modified by Basil Peace | November 2, 2024" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>November 2, 2024</span></a></div></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div></main></body></html>