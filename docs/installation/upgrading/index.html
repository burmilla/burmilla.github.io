<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Upgrading #  If BurmillaOS has released a new version and you want to learn how to upgrade your OS, we make it easy using the ros os command.
Since BurmillaOS is a kernel and initrd, the upgrade process is downloading a new kernel and initrd, and updating the boot loader to point to it. The old kernel and initrd are not removed. If there is a problem with your upgrade, you can select the old kernel from the Syslinux bootloader."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content><meta property="og:description" content="Upgrading #  If BurmillaOS has released a new version and you want to learn how to upgrade your OS, we make it easy using the ros os command.
Since BurmillaOS is a kernel and initrd, the upgrade process is downloading a new kernel and initrd, and updating the boot loader to point to it. The old kernel and initrd are not removed. If there is a problem with your upgrade, you can select the old kernel from the Syslinux bootloader."><meta property="og:type" content="article"><meta property="og:url" content="https://burmillaos.org/docs/installation/upgrading/"><meta property="article:modified_time" content="2024-11-03T00:21:50+03:00"><title>Upgrading | BurmillaOS</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.6cd8553a6854f4812343f0f0c8baca31271e686434f381fbe3c7226f66639176.css integrity="sha256-bNhVOmhU9IEjQ/DwyLrKMSceaGQ084H748cib2ZjkXY="><script defer src=/en.search.min.5b67b5953e3b2a171b6b51a22a8ef1216b6eae9a8f77e6e93869f90463a51473.js integrity="sha256-W2e1lT47Khcba1GiKo7xIWturpqPd+bpOGn5BGOlFHM="></script><script defer src=/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js integrity="sha256-dKi7B/C+6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>BurmillaOS</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/quick-start-guide/>Quick Start Guide</a></li><li><a href=/docs/installation/ class=collapsed>Installation</a><ul><li><a href=/docs/installation/upgrading/ class=active>Upgrading</a></li><li><a href=/docs/installation/boot-process/ class=collapsed>Boot Process</a></li><li><a href=/docs/installation/cloud/ class=collapsed>Cloud</a></li><li><a href=/docs/installation/custom-builds/ class=collapsed>Custom Builds</a></li><li><a href=/docs/installation/server/ class=collapsed>Server</a></li><li><a href=/docs/installation/workstation/ class=collapsed>Workstation</a></li></ul></li><li><a href=/docs/configuration/ class=collapsed>Configuration</a></li><li><a href=/docs/networking/ class=collapsed>Networking</a></li><li><a href=/docs/storage/ class=collapsed>Storage</a></li><li><a href=/docs/system-services/ class=collapsed>System Services</a></li><li><a href=/docs/additional-resources/ class=collapsed>Aditional Resources</a></li><li><a href=/docs/faqs/>FAQs</a></li><li><a href=/docs/releases/>Releases</a></li><li><a href=/docs/reference/>Reference</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Upgrading</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#upgrade-rancheros-to-burmillaos>Upgrade RancherOS to BurmillaOS</a></li><li><a href=#version-control>Version Control</a></li><li><a href=#upgrading-1>Upgrading</a><ul><li></li><li><a href=#rolling-back-an-upgrade>Rolling back an Upgrade</a></li><li><a href=#staging-an-upgrade>Staging an Upgrade</a></li><li><a href=#custom-upgrade-sources>Custom Upgrade Sources</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=upgrading>Upgrading
<a class=anchor href=#upgrading>#</a></h1><p>If BurmillaOS has released a new version and you want to learn how to upgrade your OS, we make it easy using the <code>ros os</code> command.</p><p>Since BurmillaOS is a kernel and initrd, the upgrade process is downloading a new kernel and initrd, and updating the boot loader to point to it. The old kernel and initrd are not removed. If there is a problem with your upgrade, you can select the old kernel from the Syslinux bootloader.</p><p>Before upgrading to any version, please review the release notes on our
<a href=https://github.com/burmilla/os/releases>releases page</a> in GitHub to review any updates in the release.</p><blockquote><p><strong>Note:</strong> If you are using
<a href=/docs/installation/workstation/docker-machine/><code>docker-machine</code></a> then you will not be able to upgrade your BurmillaOS version. You need to delete and re-create the machine.</p></blockquote><h2 id=upgrade-rancheros-to-burmillaos>Upgrade RancherOS to BurmillaOS
<a class=anchor href=#upgrade-rancheros-to-burmillaos>#</a></h2><p>Permanently upgrade your existing RancherOS installation to BurmillaOS and begin tracking BurmillaOS releases:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo ros config set rancher.upgrade.url <span style=color:#ae81ff>\
</span><span style=color:#ae81ff></span>https://raw.githubusercontent.com/burmilla/releases/v2.0.x/releases.yml
$ sudo ros os upgrade
</code></pre></div><p>After reboot run also:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo ros console switch default
</code></pre></div><p>other why you are still using console from RancherOS (visible in <code>sudo system-docker ps</code> output)</p><h2 id=version-control>Version Control
<a class=anchor href=#version-control>#</a></h2><p>First, let&rsquo;s check what version you have running on your system.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo ros os version
v2.0.0
</code></pre></div><p>If you just want to find out the available releases from the command line, it&rsquo;s a simple command.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># List all available releases</span>
$ sudo ros os list
burmilla/os:v2.0.0 local latest running
burmilla/os:v2.0.0 remote available
</code></pre></div><p>The <code>local</code>/<code>remote</code> label shows which images are available to System Docker locally versus which need to be pulled from Docker Hub. If you choose to upgrade to a version that is remote, we will automatically pull that image during the upgrade.</p><h2 id=upgrading-1>Upgrading
<a class=anchor href=#upgrading-1>#</a></h2><p>Let&rsquo;s walk through upgrading! The <code>ros os upgrade</code> command will automatically upgrade to the current release of BurmillaOS. The current release is designated as the most recent release of BurmillaOS.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo ros os upgrade
Upgrading to burmilla/os:v2.0.0
</code></pre></div><p>Confirm that you want to continue and the final step will be to confirm that you want to reboot.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>Continue <span style=color:#f92672>[</span>y/N<span style=color:#f92672>]</span>: y
...
...
...
Continue with reboot <span style=color:#f92672>[</span>y/N<span style=color:#f92672>]</span>: y
INFO<span style=color:#f92672>[</span>0037<span style=color:#f92672>]</span> Rebooting
</code></pre></div><blockquote><p><strong>Note:</strong> The default console container is persistent and will NOT be updated by default. Use <code>ros console switch default</code> to update the <code>os-console</code> container. This is a destructive operation - see
<a href=/docs/installation/custom-builds/custom-console/#console-persistence>console persistence</a> for info about what will be retained.</p></blockquote><blockquote><p><strong>Note:</strong> To make the default container non-persistent, set <code>io.docker.compose.rebuild: "always"</code> on the console container
<a href=https://github.com/burmilla/os/blob/v2.0.0/os-config.tpl.yml#L246>os-config.tpl</a></p></blockquote><p>After rebooting, you can check that your version has been updated.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo ros -v
version v2.0.0 from os image burmilla/os:v2.0.0
</code></pre></div><blockquote><p><strong>Note:</strong> If you are booting from ISO and have not installed to disk, your upgrade will not be saved. You can view our guide to
<a href=/docs/installation/server/install-to-disk/>installing to disk</a>.</p></blockquote><h4 id=upgrading-to-a-specific-version>Upgrading to a Specific Version
<a class=anchor href=#upgrading-to-a-specific-version>#</a></h4><p>If you are a couple of versions behind the current version, use the <code>-i</code> option to pick the version that you want to upgrade to.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo ros os upgrade -i burmilla/os:v2.0.0
Upgrading to burmilla/os:v2.0.0
Continue <span style=color:#f92672>[</span>y/N<span style=color:#f92672>]</span>: y
...
...
...
Continue with reboot <span style=color:#f92672>[</span>y/N<span style=color:#f92672>]</span>: y
INFO<span style=color:#f92672>[</span>0082<span style=color:#f92672>]</span> Rebooting
</code></pre></div><h4 id=bypassing-the-prompts>Bypassing The Prompts
<a class=anchor href=#bypassing-the-prompts>#</a></h4><p>We have added the ability to bypass the prompts. Use the <code>-f</code> or <code>--force</code> option when upgrading. Your machine will automatically be rebooted and you&rsquo;ll just need to log back in when it&rsquo;s done.</p><p>If you want to bypass the prompts, but you don&rsquo;t want to immediately reboot, you can add <code>--no-reboot</code> to avoid rebooting immediately.</p><h3 id=rolling-back-an-upgrade>Rolling back an Upgrade
<a class=anchor href=#rolling-back-an-upgrade>#</a></h3><p>If you&rsquo;ve upgraded your BurmillaOS and something&rsquo;s not working anymore, you can easily rollback your upgrade.</p><p>The <code>ros os upgrade</code> command works for rolling back. We&rsquo;ll use the <code>-i</code> option to &ldquo;upgrade&rdquo; to a specific version. All you need to do is pick the previous version! Same as before, you will be prompted to confirm your upgrade version as well as confirm your reboot.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo ros -v
ros version v1.9.0
$ sudo ros os upgrade -i burmilla/os:v2.0.0
Upgrading to burmilla/os:v2.0.0
Continue <span style=color:#f92672>[</span>y/N<span style=color:#f92672>]</span>: y
...
...
...
Continue with reboot <span style=color:#f92672>[</span>y/N<span style=color:#f92672>]</span>: y
INFO<span style=color:#f92672>[</span>0082<span style=color:#f92672>]</span> Rebooting
</code></pre></div><p>After rebooting, the rollback will be complete.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo ros -v
version v2.0.0 from os image burmilla/os:v2.0.0
</code></pre></div><blockquote><p><strong>Note:</strong> If you are using a
<a href=/docs/installation/custom-builds/custom-console/#console-persistence>persistent console</a> and in the current version&rsquo;s console, rolling back is not supported. For example, rolling back to v0.4.5 when using a v0.5.0 persistent console is not supported.</p></blockquote><h3 id=staging-an-upgrade>Staging an Upgrade
<a class=anchor href=#staging-an-upgrade>#</a></h3><p>During an upgrade, the template of the upgrade is downloaded from the burmilla/os repository. You can download this template ahead of time so that it&rsquo;s saved locally. This will decrease the time it takes to upgrade. We&rsquo;ll use the <code>-s</code> option to stage the specific template. You will need to specify the image name with the <code>-i</code> option, otherwise it will automatically stage the current version.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo ros os upgrade -s -i burmilla/os:v2.0.0
</code></pre></div><h3 id=custom-upgrade-sources>Custom Upgrade Sources
<a class=anchor href=#custom-upgrade-sources>#</a></h3><p>In the <code>upgrade</code> key, the <code>url</code> is used to find the list of available and current versions of BurmillaOS. This can be modified to track custom builds and releases.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#75715e>#cloud-config</span>
<span style=color:#f92672>rancher</span>:
  <span style=color:#f92672>upgrade</span>:
    <span style=color:#f92672>url</span>: <span style=color:#ae81ff>https://raw.githubusercontent.com/burmilla/releases/master/releases.yml</span>
    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>burmilla/os</span>
</code></pre></div></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/burmilla/burmilla.github.io/commit/d1f8103458f8d8797699dad433c52d714e54f731 title="Last modified by Basil Peace | November 2, 2024" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>November 2, 2024</span></a></div></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#upgrade-rancheros-to-burmillaos>Upgrade RancherOS to BurmillaOS</a></li><li><a href=#version-control>Version Control</a></li><li><a href=#upgrading-1>Upgrading</a><ul><li></li><li><a href=#rolling-back-an-upgrade>Rolling back an Upgrade</a></li><li><a href=#staging-an-upgrade>Staging an Upgrade</a></li><li><a href=#custom-upgrade-sources>Custom Upgrade Sources</a></li></ul></li></ul></nav></aside></main></body></html>