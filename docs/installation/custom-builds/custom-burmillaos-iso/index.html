<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Custom BurmillaOS ISO #  It&rsquo;s easy to build your own BurmillaOS ISO.
Create a clone of the main BurmillaOS repository to your local machine with a git clone.
$ git clone https://github.com/burmilla/os.git In the root of the repository, the &ldquo;General Configuration&rdquo; section of Dockerfile.dapper can be updated to use custom kernels. After you&rsquo;ve saved your edits, run make in the root directory. After the build has completed, a ./dist/artifacts directory will be created with the custom built BurmillaOS release files."><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Custom BurmillaOS ISO"><meta property="og:description" content="Custom BurmillaOS ISO #  It&rsquo;s easy to build your own BurmillaOS ISO.
Create a clone of the main BurmillaOS repository to your local machine with a git clone.
$ git clone https://github.com/burmilla/os.git In the root of the repository, the &ldquo;General Configuration&rdquo; section of Dockerfile.dapper can be updated to use custom kernels. After you&rsquo;ve saved your edits, run make in the root directory. After the build has completed, a ./dist/artifacts directory will be created with the custom built BurmillaOS release files."><meta property="og:type" content="article"><meta property="og:url" content="https://burmillaos.org/docs/installation/custom-builds/custom-burmillaos-iso/"><meta property="article:modified_time" content="2024-11-03T00:21:50+03:00"><title>Custom BurmillaOS ISO | BurmillaOS</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.6cd8553a6854f4812343f0f0c8baca31271e686434f381fbe3c7226f66639176.css integrity="sha256-bNhVOmhU9IEjQ/DwyLrKMSceaGQ084H748cib2ZjkXY="><script defer src=/en.search.min.5b67b5953e3b2a171b6b51a22a8ef1216b6eae9a8f77e6e93869f90463a51473.js integrity="sha256-W2e1lT47Khcba1GiKo7xIWturpqPd+bpOGn5BGOlFHM="></script><script defer src=/sw.min.74a8bb07f0bee86d6bb9a2750f073f14d93c7e4512f28860370cfd879e9719b4.js integrity="sha256-dKi7B/C+6G1ruaJ1Dwc/FNk8fkUS8ohgNwz9h56XGbQ="></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>BurmillaOS</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/quick-start-guide/>Quick Start Guide</a></li><li><a href=/docs/installation/ class=collapsed>Installation</a><ul><li><a href=/docs/installation/upgrading/>Upgrading</a></li><li><a href=/docs/installation/boot-process/ class=collapsed>Boot Process</a></li><li><a href=/docs/installation/cloud/ class=collapsed>Cloud</a></li><li><a href=/docs/installation/custom-builds/ class=collapsed>Custom Builds</a><ul><li><a href=/docs/installation/custom-builds/custom-console/>Custom Console</a></li><li><a href=/docs/installation/custom-builds/custom-kernels/>Custom Kernels</a></li><li><a href=/docs/installation/custom-builds/custom-burmillaos-iso/ class=active>Custom BurmillaOS ISO</a></li></ul></li><li><a href=/docs/installation/server/ class=collapsed>Server</a></li><li><a href=/docs/installation/workstation/ class=collapsed>Workstation</a></li></ul></li><li><a href=/docs/configuration/ class=collapsed>Configuration</a></li><li><a href=/docs/networking/ class=collapsed>Networking</a></li><li><a href=/docs/storage/ class=collapsed>Storage</a></li><li><a href=/docs/system-services/ class=collapsed>System Services</a></li><li><a href=/docs/additional-resources/ class=collapsed>Aditional Resources</a></li><li><a href=/docs/faqs/>FAQs</a></li><li><a href=/docs/releases/>Releases</a></li><li><a href=/docs/reference/>Reference</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Custom BurmillaOS ISO</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#creating-a-gce-image-archive>Creating a GCE Image Archive</a></li><li><a href=#custom-build-cases>Custom Build Cases</a><ul><li><a href=#reduce-memory-requirements>Reduce Memory Requirements</a></li><li><a href=#building-with-a-different-console>Building with a Different Console</a></li><li><a href=#building-with-predefined-docker-images>Building with Predefined Docker Images</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=custom-burmillaos-iso>Custom BurmillaOS ISO
<a class=anchor href=#custom-burmillaos-iso>#</a></h1><p>It&rsquo;s easy to build your own BurmillaOS ISO.</p><p>Create a clone of the main
<a href=https://github.com/burmilla/os>BurmillaOS repository</a> to your local machine with a <code>git clone</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ git clone https://github.com/burmilla/os.git
</code></pre></div><p>In the root of the repository, the &ldquo;General Configuration&rdquo; section of <code>Dockerfile.dapper</code> can be updated to use
<a href=/docs/installation/custom-builds/custom-kernels/>custom kernels</a>.
After you&rsquo;ve saved your edits, run <code>make</code> in the root directory. After the build has completed, a <code>./dist/artifacts</code> directory will be created with the custom built BurmillaOS release files.
Build Requirements: <code>bash</code>, <code>make</code>, <code>docker</code> (Docker version >= 1.10.3)</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ make
$ cd dist/artifacts
$ ls
initrd             burmillaos.iso
iso-checksums.txt  vmlinuz
</code></pre></div><p>If you need a compressed ISO, you can run this command:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ make release
</code></pre></div><p>The <code>burmillaos.iso</code> is ready to be used to
<a href=/docs/installation/workstation/boot-from-iso/>boot BurmillaOS from ISO</a> or
<a href=/docs/installation/workstation/docker-machine/>launch BurmillaOS using Docker Machine</a>.</p><h2 id=creating-a-gce-image-archive>Creating a GCE Image Archive
<a class=anchor href=#creating-a-gce-image-archive>#</a></h2><p>Create a clone of the main
<a href=https://github.com/burmilla/os>BurmillaOS repository</a> to your local machine with a <code>git clone</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ git clone https://github.com/burmilla/os-packer.git
</code></pre></div><p>GCE supports KVM virtualization, and we use <code>packer</code> to build KVM images. Before building, you need to verify that the host can support KVM.
If you want to build GCE image based on BurmillaOS v1.4.0, you can run this command:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>BURMILLAOS_VERSION<span style=color:#f92672>=</span>v1.4.0 make build-gce
</code></pre></div><h2 id=custom-build-cases>Custom Build Cases
<a class=anchor href=#custom-build-cases>#</a></h2><h3 id=reduce-memory-requirements>Reduce Memory Requirements
<a class=anchor href=#reduce-memory-requirements>#</a></h3><p>With changes to the kernel and built Docker, BurmillaOS booting requires more memory. For details, please refer to the
<a href=/#hardware-requirements>memory requirements</a>.</p><p>By customizing the ISO, you can reduce the memory usage on boot. The easiest way is to downgrade the built-in Docker version, because Docker takes up a lot of space.
This can effectively reduce the memory required to decompress the <code>initrd</code> on boot. Using docker 17.03 is a good choice:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># run make</span>
$ USER_DOCKER_VERSION<span style=color:#f92672>=</span>17.03.2 make release
</code></pre></div><h3 id=building-with-a-different-console>Building with a Different Console
<a class=anchor href=#building-with-a-different-console>#</a></h3><p><em>Available as of RancherOS v1.5.0</em></p><p>When building BurmillaOS, you have the ability to automatically start in a supported console instead of booting into the default console and switching to your desired one.</p><p>Here is an example of building BurmillaOS and having the <code>alpine</code> console enabled:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ OS_CONSOLE<span style=color:#f92672>=</span>alpine make release
</code></pre></div><h3 id=building-with-predefined-docker-images>Building with Predefined Docker Images
<a class=anchor href=#building-with-predefined-docker-images>#</a></h3><p>If you want to use a custom ISO file to address an offline scenario, you can use predefined images for <code>system-docker</code> and <code>user-docker</code>.</p><p>BurmillaOS supports <code>APPEND_SYSTEM_IMAGES</code>. It can save images to the <code>initrd</code> file, and is loaded with <code>system-docker</code> when booting.</p><p>You can build the ISO like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>APPEND_SYSTEM_IMAGES<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;burmilla/os-openvmtools:10.3.10-1&#34;</span> make release
</code></pre></div><p>BurmillaOS also supports <code>APPEND_USER_IMAGES</code>. It can save images to the <code>initrd</code> file, and is loaded with <code>user-docker</code> when booting.</p><p>You can build the ISO like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>APPEND_USER_IMAGES<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;alpine:3.9 ubuntu:bionic&#34;</span> make release
</code></pre></div><p>Please note that these will be packaged into the <code>initrd</code>, and the predefined images will affect the resource footprint at startup.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/burmilla/burmilla.github.io/commit/d1f8103458f8d8797699dad433c52d714e54f731 title="Last modified by Basil Peace | November 2, 2024" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>November 2, 2024</span></a></div></div></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#creating-a-gce-image-archive>Creating a GCE Image Archive</a></li><li><a href=#custom-build-cases>Custom Build Cases</a><ul><li><a href=#reduce-memory-requirements>Reduce Memory Requirements</a></li><li><a href=#building-with-a-different-console>Building with a Different Console</a></li><li><a href=#building-with-predefined-docker-images>Building with Predefined Docker Images</a></li></ul></li></ul></nav></aside></main></body></html>